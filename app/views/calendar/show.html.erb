<% content_for(:title, l(@day_info[:date], format: :full_day)) %>

<h1><%= l(@day_info[:date], format: :full_day) %></h1>

<%= render 'day_description' %>

<hr />

<% if @day_form.errors.count > 0 %>
    <div>There are errors:</div>
    <ul>
      <% @day_info_form.errors.full_messages.each do |m| %>
          <li><%= m %></li>
      <% end %>
    </ul>
<% end %>

<%= form_for(@day_form, url: update_calendar_day_url(@day_info[:date].year, @day_info[:date].month, @day_info[:date].day), method: :put, html: {autocomplete: 'off'}) do |f| %>
    <div class="form-group">
      <label class="checkbox-inline">
        <%= f.check_box :critical_day %>
        Critical day
      </label>
    </div>

    <% unless @day_info[:current_period].nil? %>
        <div class="form-group delete-period-block panel panel-default" id="delete-period-block">
          <div class="panel-heading">Remove critical day from period</div>
          <div class="panel-body">
            <div class="form-group">
              <p>
                You are going to remove this date from critical period. Please, choose the way to do it.
              </p>

              <label class="radio-inline">
                <%= f.radio_button :delete_period, 'all', checked: true %>
                Delete whole period
              </label>

              <br/>

              <label class="radio-inline">
                <%= f.radio_button :delete_period, 'tail' %>
                Remove current date and period tail
              </label>

              <br/>

              <label class="radio-inline">
                <%= f.radio_button :delete_period, 'head' %>
                Remove current date and period head
              </label>
            </div>

            <div>
              <span class="btn btn-default" id="delete-period-cancel">Do not remove</span>
            </div>
          </div>
        </div>
    <% end %>

    <div class="form-group">
      <%= f.submit('Save', class: 'btn btn-primary') %>
    </div>
<% end %>
